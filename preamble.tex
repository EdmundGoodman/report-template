% Set paper geometry
\usepackage{geometry}
\geometry{a4paper,total={170mm,257mm}}

% Set font
\usepackage{fontspec}
\setmainfont{Linux Libertine O}[Ligatures={Common}]
\setmonofont{Fira Code}[Contextuals=Alternate,Scale=MatchLowercase]

% Include useful packages
\usepackage{float}
\usepackage{graphicx}
\usepackage{appendix}
\usepackage{placeins}

% Configure hyperlinks
\usepackage{url}
\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	linkcolor=black,
	urlcolor=black,
	citecolor=black
}

% Style paragraphs
\usepackage{parskip}
\setlength{\parindent}{0pt}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}

% Style captions
\usepackage{caption}
\captionsetup{labelfont=bf,width=0.8 \textwidth}

% Set up code highlight
\usepackage{minted}
\setminted{escapeinside=||,linenos,breaklines,autogobble}
%% Support listings which wrap over pages
\newenvironment{longlisting}{\captionsetup{type=listing}}{}

% Configure bibliography
\usepackage[numbib]{tocbibind}
\usepackage[citestyle=ieee]{biblatex}
\addbibresource{references.bib}
%% Avoid overflowing URLs (https://stackoverflow.com/a/43593557)
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}

% Configure custom title section
% Abstracts can optional be defined as with titles/authors through the `\abstracttext{Text...}` command
\makeatletter
\newcommand{\@abstracttext}[0]{}
\newcommand{\abstracttext}[1]{\renewcommand{\@abstracttext}{#1}}
\newcommand{\@abstractkeywords}[0]{}
\newcommand{\abstractkeywords}[1]{\renewcommand{\@abstractkeywords}{#1}}

\renewcommand\maketitle{
{\raggedright
\begin{center}
    {\Huge\textbf{\@title}} \\[0.5em]
    {\Large{\@author}} \\[0.5em]
    {\normalsize\textit{\@date}}
\end{center}
}
\ifdefempty{\@abstracttext}{}{
    %% Simple abstract
    % \section*{Abstract}
    % \@abstracttext
    % \ifdefempty{\@abstractkeywords}{}{
    %     \\\\
    %     \textbf{Keywords: }\@abstractkeywords
    % }
    %% Abstract environment without heading
    \renewcommand{\abstractname}{\vspace{-\baselineskip}}
    \begin{abstract}
        \noindent\ignorespaces\@abstracttext
        \ifdefempty{\@abstractkeywords}{}{
            \\\\
            \noindent\ignorespaces\textbf{Keywords: }\@abstractkeywords
        }
    \end{abstract}
}
}
\makeatother
